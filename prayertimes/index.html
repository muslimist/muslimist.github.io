<!DOCTYPE HTML>
<html>
	<head>
		<title>muslimist | prayer times</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="divided">



				<!-- One -->
					<section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
						<div class="content">
							<h1>prayer times</h1>
							<p class="major">set your location and calculation method once and it will be remembered on your end forever</p>
						</div>
						<div class="image">
							<img src="https://images.unsplash.com/photo-1574246604907-db69e30ddb97?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=3022&q=80" alt="" />
						</div>
					</section>






				<!-- Additional Elements -->
					<section class="wrapper style1 align-center">
						<div class="inner" style="padding: 2rem 4rem 2rem 4rem;">
							<div class="index align-left">

								<!-- Text -->
									<section>
										<header>
											<h3>Times</h3>
										</header>
										<div class="content">

											<div class="table-wrapper" id="table-wrapper"></div>

										</div>
									</section>

								<!-- Heading -->
									<section>
										<header>
											<h3>Settings</h3>
										</header>
										<div class="content">

											<form method="post" action="#">
												<div class="fields">
													<div class="field">
														<label for="getlocation">GPS Location</label>
														<ul class="actions" style="margin: 0 0 0 0;">
															<li><a name="getlocation" id="getlocation" class="button" onclick="getLocation()">Get coordinates from gps location</a></li>
														</ul>
													</div>
													<div class="field half">
														<label for="latitude">Latitude</label>
														<input type="text" name="latitude" id="latitude" value="43" onchange="update()" />
													</div>
													<div class="field half">
														<label for="longitude">Longitude</label>
														<input type="email" name="longitude" id="longitude" value="-80" onchange="update()" />
													</div>



													
													<div class="field half">
														<label for="timezone">Timezone</label>
														<select name="timezone" id="timezone" onchange="update()">
															<option value="-12">-12:00</option>
															<option value="-11">-11:00</option>
															<option value="-10">-10:00</option>
															<option value="-9.5">-09:30</option>
															<option value="-9">-09:00</option>
															<option value="-8">-08:00</option>
															<option value="-7">-07:00</option>
															<option value="-6">-06:00</option>
															<option value="-5" selected="selected">-05:00</option>
															<option value="-4">-04:00</option>
															<option value="-3.5">-03:30</option>
															<option value="-3">-03:00</option>
															<option value="-2">-02:00</option>
															<option value="-1">-01:00</option>
															<option value="0">±00:00</option>
															<option value="+1">+01:00</option>
															<option value="+2">+02:00</option>
															<option value="+3">+03:00</option>
															<option value="+3.5">+03:30</option>
															<option value="+4">+04:00</option>
															<option value="+4.5">+04:30</option>
															<option value="+5">+05:00</option>
															<option value="+5.5">+05:30</option>
															<option value="+5.75">+05:45</option>
															<option value="+6">+06:00</option>
															<option value="+6.5">+06:30</option>
															<option value="+7">+07:00</option>
															<option value="+8">+08:00</option>
															<option value="+8.75">+08:45</option>
															<option value="+9">+09:00</option>
															<option value="+9.5">+09:30</option>
															<option value="+10">+10:00</option>
															<option value="+10.5">+10:30</option>
															<option value="+11">+11:00</option>
															<option value="+12">+12:00</option>
															<option value="+12.75">+12:45</option>
															<option value="+13">+13:00</option>
															<option value="+14">+14:00</option>
													    </select>
													</div>



													<div class="field half">
														<label for="daylightsavingtime">Daylight Saving Time</label>
														<select name="daylightsavingtime" id="daylightsavingtime" onchange="update()">
															<option value="auto" selected="selected">Auto</option>
															<option value="0">Disabled</option>
															<option value="1">Enabled</option>
													    </select>
													</div>
													<div class="field">
														<label for="method">Method</label>
														<select name="method" id="method" onchange="update()">
															<option value="MWL">Muslim World League (MWL)</option>
															<option value="ISNA" selected="selected">Islamic Society of North America (ISNA)</option>
															<option value="Egypt">Egyptian General Authority of Survey</option>
															<option value="Makkah">Umm al-Qura University, Makkah</option>
															<option value="Karachi">University of Islamic Sciences, Karachi</option>
															<option value="Jafari">Shia Ithna-Ashari (Jafari)</option>
															<option value="Tehran">Institute of Geophysics, University of Tehran</option>
															<option value="Algeria">Algerian Minister of Religious Affairs and Wakfs</option>
															<option value="Diyanet">Diyanet İşleri Başkanlığı</option>
															<option value="EgyptBis">Egyptian General Authority (Bis)</option>
															<option value="FixedIsha">Fixed Isha Angle Interval</option>
															<option value="FranceUOIF">France UOIF - Angle 12°</option>
															<option value="France15">France - Angle 15°</option>
															<option value="France18">France - Angle 18°</option>
															<option value="JAKIM">JAKIM (Jabatan Kemajuan Islam Malaysia)</option>
															<option value="MUIS">MUIS (Majlis Ugama Islam Singapura)</option>
															<option value="Kemenag">SIHAT/KEMENAG (Kementerian Agama RI)</option>
															<option value="Tunisia">Tunisian Ministry of Religious Affairs</option>
															<option value="AwqafUAE">UAE General Authority of Islamic Affairs And Endowments</option>
															<option value="LondonUIPT">London Unified Islamic Prayer Timetable</option>
													    </select>
													</div>
													<div class="field">
														<label for="format">Time Format</label>
														<select name="format" id="format" onchange="update()">
															<option value="12h" selected="selected">12-hour</option>
															<option value="12hNS">12-hour (no suffix)</option>
															<option value="24h">24-hour</option>
															<!--<option value="Float">float</option>-->
													    </select>
													</div>

													<div class="field">
														<label style="margin: 0 0 0 0;">View Times</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="imsak" name="imsak" onchange="update()" />
														<label for="imsak">Imsak</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="fajr" name="fajr" onchange="update()" />
														<label for="fajr">Fajr</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="sunrise" name="sunrise" onchange="update()" />
														<label for="sunrise">Sunrise</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="dhuhr" name="dhuhr" onchange="update()" />
														<label for="dhuhr">Dhuhr</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="asr" name="asr" onchange="update()" />
														<label for="asr">Asr</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="sunset" name="sunset" onchange="update()" />
														<label for="sunset">Sunset</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="maghrib" name="maghrib" onchange="update()" />
														<label for="maghrib">Maghrib</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="isha" name="isha" onchange="update()" />
														<label for="isha">Isha</label>
													</div>
													<div class="field third">
														<input type="checkbox" id="midnight" name="midnight" onchange="update()" />
														<label for="midnight">Midnight</label>
													</div>


<br><br><br>
													<div class="field">
														<label for="reset">Reset to default settings</label>
														<ul class="actions" style="margin: 0 0 0 0;">
															<li><a name="reset" id="reset" class="button" onclick="reset()">Reset</a></li>
														</ul>
													</div>


												</div>
											</form>

										</div>
									</section>


							</div>
						</div>
					</section>








				<!-- Footer -->
					<footer class="wrapper style1 align-center">
						<div class="inner">
							<link rel="stylesheet" type="text/css" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
							<p>made with <span style="color: #e25555;"><i class="icon ion-heart"></i></span> by muslims for muslims<br><a href="/">muslimist.com</a></p>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script type="text/javascript" src="PrayTimes.js"></script>
			<script type="text/javascript">

				if (localStorage.latitude) {
					$('latitude').value = localStorage.getItem("latitude");
				} else {
					localStorage.setItem("latitude", $('latitude').value);
				}

				if (localStorage.longitude) {
					$('longitude').value = localStorage.getItem("longitude");
				} else {
					localStorage.setItem("longitude", $('longitude').value);
				}

				if (localStorage.timezone) {
					$('timezone').value = localStorage.getItem("timezone");
				} else {
					localStorage.setItem("timezone", $('timezone').value);
				}

				if (localStorage.daylightsavingtime) {
					$('daylightsavingtime').value = localStorage.getItem("daylightsavingtime");
				} else {
					localStorage.setItem("daylightsavingtime", $('daylightsavingtime').value);
				}

				if (localStorage.method) {
					$('method').value = localStorage.getItem("method");
				} else {
					localStorage.setItem("method", $('method').value);
				}

				if (localStorage.format) {
					$('format').value = localStorage.getItem("format");
				} else {
					localStorage.setItem("format", $('format').value);
				}

				if (localStorage.list) {
					var list = JSON.parse(localStorage.getItem("list"));

					for (i = 0; i < list.length; i++) {
						$(list[i].toLowerCase()).checked = true;
					}
				} else {
					$("imsak").checked = true;
					$("fajr").checked = true;
					$("sunrise").checked = true;
					$("dhuhr").checked = true;
					$("asr").checked = true;
					$("sunset").checked = true;
					$("maghrib").checked = true;
					$("isha").checked = true;
					$("midnight").checked = true;
				}


				function update() {


					if (localStorage.latitude != $('latitude').value) {
						localStorage.setItem("latitude", $('latitude').value);
					}
					var latitude = localStorage.getItem("latitude");

					if (localStorage.longitude != $('longitude').value) {
						localStorage.setItem("longitude", $('longitude').value);
					}
					var longitude = localStorage.getItem("longitude");

					if (localStorage.timezone != $('timezone').value) {
						localStorage.setItem("timezone", $('timezone').value);
					}
					var timezone = localStorage.getItem("timezone");

					if (localStorage.daylightsavingtime != $('daylightsavingtime').value) {
						localStorage.setItem("daylightsavingtime", $('daylightsavingtime').value);
					}
					var daylightsavingtime = localStorage.getItem("daylightsavingtime");

					if (localStorage.method != $('method').value) {
						localStorage.setItem("method", $('method').value);
					}
					var method = localStorage.getItem("method");

					if (localStorage.format != $('format').value) {
						localStorage.setItem("format", $('format').value);
					}
					var format = localStorage.getItem("format");

					var list = [];
					if ($('imsak').checked == true) { list.push("Imsak"); }
					if ($('fajr').checked == true) { list.push("Fajr"); }
					if ($('sunrise').checked == true) { list.push("Sunrise"); }
					if ($('dhuhr').checked == true) { list.push("Dhuhr"); }
					if ($('asr').checked == true) { list.push("Asr"); }
					if ($('sunset').checked == true) { list.push("Sunset"); }
					if ($('maghrib').checked == true) { list.push("Maghrib"); }
					if ($('isha').checked == true) { list.push("Isha"); }
					if ($('midnight').checked == true) { list.push("Midnight"); }
					localStorage.setItem("list", JSON.stringify(list));
					
					var date = new Date(); // today
					prayTimes.setMethod(method);
					var times = prayTimes.getTimes(date, [latitude, longitude], timezone, daylightsavingtime, format);
					var list = JSON.parse(localStorage.getItem("list"));

					var html = '<table>';
					html += '<tbody>';
					for(var i in list)	{
						html += '<tr><td>'+ list[i]+ '</td>';
						html += '<td>'+ times[list[i].toLowerCase()]+ '</td></tr>';
					}
					html += '<tbody></table>';
					$('table-wrapper').innerHTML = html;
				}

				function $(id) {
					return document.getElementById(id);
				}

				update();

				function getLocation() {
				  if (navigator.geolocation) {
				    navigator.geolocation.getCurrentPosition(showPosition, showError);
				    $("getlocation").innerHTML="getting location";
				  } else { 
				    alert("Geolocation is not supported by this browser.");
				  }
				}

				function showPosition(position) {
					$('latitude').value = position.coords.latitude;
					$('longitude').value = position.coords.longitude;
					update();
					$("getlocation").innerHTML="success";
					setTimeout(function(){ $("getlocation").innerHTML="GET COORDINATES FROM GPS LOCATION"; }, 3000);

				}

				function showError(error) {
				  switch(error.code) {
				    case error.PERMISSION_DENIED:
				      $("getlocation").innerHTML="User denied geolocation request.";
				      break;
				    case error.POSITION_UNAVAILABLE:
				      $("getlocation").innerHTML="Location information unavailable.";
				      break;
				    case error.TIMEOUT:
				      $("getlocation").innerHTML="The request timed out.";
				      break;
				    case error.UNKNOWN_ERROR:
				      $("getlocation").innerHTML="An unknown error occurred.";
				      break;
				  }
				  setTimeout(function(){ $("getlocation").innerHTML="GET COORDINATES FROM GPS LOCATION"; }, 3000);
				}

				function reset() {
					localStorage.clear();
					location.reload();
				}

			</script>

	</body>
</html>