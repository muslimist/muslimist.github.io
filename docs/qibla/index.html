<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>muslimist | qibla</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="an ad-free, open source, non-spying collection of tools for muslims">
		<meta name="theme-color" content="#000000"/>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta property="og:title" content="muslimist | qibla" />
		<meta property="og:description" content="an ad-free, open source, non-spying collection of tools for muslims" />
		<meta property="og:url" content="https://muslimist.com/qibla" />
		<meta property="og:image" content="/assets/icons/apple-splash-1136-640.jpg" />
		<link rel="preload" href="/assets/fonts/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwlxdu3cOWxw.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="/assets/fonts/fa-solid-900.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="/assets/fonts/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2" as="font" crossorigin="anonymous">
		<link rel="stylesheet" href="/assets/css/app.min.css" />
		<link rel="manifest" href="/manifest.webmanifest">
		<link rel="icon" type="image/png" sizes="196x196" href="/assets/icons/favicon-196.png">
		<link rel="apple-touch-icon" href="/assets/icons/apple-icon-180.png">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2048-2732.jpg" media="(width: 1024px) and (height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2732-2048.jpg" media="(width: 1024px) and (height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1668-2388.jpg" media="(width: 834px) and (height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2388-1668.jpg" media="(width: 834px) and (height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1536-2048.jpg" media="(width: 768px) and (height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2048-1536.jpg" media="(width: 768px) and (height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1668-2224.jpg" media="(width: 834px) and (height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2224-1668.jpg" media="(width: 834px) and (height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1620-2160.jpg" media="(width: 810px) and (height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2160-1620.jpg" media="(width: 810px) and (height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1284-2778.jpg" media="(width: 428px) and (height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2778-1284.jpg" media="(width: 428px) and (height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1170-2532.jpg" media="(width: 390px) and (height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2532-1170.jpg" media="(width: 390px) and (height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1125-2436.jpg" media="(width: 375px) and (height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2436-1125.jpg" media="(width: 375px) and (height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1242-2688.jpg" media="(width: 414px) and (height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2688-1242.jpg" media="(width: 414px) and (height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-828-1792.jpg" media="(width: 414px) and (height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1792-828.jpg" media="(width: 414px) and (height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1242-2208.jpg" media="(width: 414px) and (height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-2208-1242.jpg" media="(width: 414px) and (height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-750-1334.jpg" media="(width: 375px) and (height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1334-750.jpg" media="(width: 375px) and (height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-640-1136.jpg" media="(width: 320px) and (height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="/assets/icons/apple-splash-1136-640.jpg" media="(width: 320px) and (height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
	</head>

	<body class="is-preload">
		<div id="wrapper" class="divided">


      <style>
      .compass {
        position: relative;
        width: 320px;
        height: 320px;
        border-radius: 50%;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        margin: auto;
      }

      .compass > .arrow {
        position: absolute;
        width: 0;
        height: 0;
        top: -20px;
        left: 50%;
        transform: translateX(-50%);
        border-style: solid;
        border-width: 30px 20px 0 20px;
        border-color: red transparent transparent transparent;
        z-index: 1;
      }

      .compass > .compass-circle,
      .compass > .my-point {
        position: absolute;
        width: 90%;
        height: 90%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        transition: transform 0.1s ease-out;
        background: url(https://purepng.com/public/uploads/large/purepng.com-compasscompassinstrumentnavigationcardinal-directionspointsdiagram-1701527842316onq7x.png)
          center no-repeat;
        background-size: contain;
      }

      .compass > .my-point {
        opacity: 0;
        width: 20%;
        height: 20%;
        background: rgb(8, 223, 69);
        border-radius: 50%;
        transition: opacity 0.5s ease-out;
      }

      .start-btn {
        margin-bottom: auto;
      }
    </style>


      <section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
        <div class="content">
          <h1>qibla</h1>
          <p class="major">find the qibla for your current position</p>
        </div>
        <div class="image">
          <img src="/assets/images/header_qibla.webp" alt="" />
        </div>
      </section>


      <section class="wrapper style1 align-center">
        <div class="inner" style="padding: 2rem 4rem 2rem 4rem;">
          <div class="index align-left">
            <section>
              <header>
                <h3>qibla</h3>
              </header>
              <div class="content">
                <center>
                  <div class="compass">
                    <div class="arrow"></div>
                    <div class="compass-circle"></div>
                    <div class="my-point"></div>
                  </div>
                  <br><br>
                  <button class="start-btn">Start compasss</button>
                </center>
              </div>
            </section>
          </div>
        </div>
      </section>


      <script src="/assets/js/app.min.js"></script>
      <script type="text/javascript" src="/assets/js/praytimes.js"></script>
      <script type="text/javascript">

        const compassCircle = document.querySelector(".compass-circle");
        const myPoint = document.querySelector(".my-point");
        const startBtn = document.querySelector(".start-btn");
        const isIOS =
          navigator.userAgent.match(/(iPod|iPhone|iPad)/) &&
          navigator.userAgent.match(/AppleWebKit/);

        function init() {
          startBtn.addEventListener("click", startCompass);
          navigator.geolocation.getCurrentPosition(locationHandler);

          if (!isIOS) {
            window.addEventListener("deviceorientationabsolute", handler, true);
          }
        }

        function startCompass() {
          if (isIOS) {
            DeviceOrientationEvent.requestPermission()
              .then((response) => {
                if (response === "granted") {
                  window.addEventListener("deviceorientation", handler, true);
                } else {
                  alert("has to be allowed!");
                }
              })
              .catch(() => alert("not supported"));
          }
        }

        function handler(e) {
          compass = e.webkitCompassHeading || Math.abs(e.alpha - 360);
          compassCircle.style.transform = `translate(-50%, -50%) rotate(${-compass}deg)`;

          // ±15 degree
          if (
            (pointDegree < Math.abs(compass) &&
              pointDegree + 15 > Math.abs(compass)) ||
            pointDegree > Math.abs(compass + 15) ||
            pointDegree < Math.abs(compass)
          ) {
            myPoint.style.opacity = 0;
          } else if (pointDegree) {
            myPoint.style.opacity = 1;
          }
        }

        let pointDegree;

        function locationHandler(position) {
          const { latitude, longitude } = position.coords;
          pointDegree = calcDegreeToPoint(latitude, longitude);

          if (pointDegree < 0) {
            pointDegree = pointDegree + 360;
          }
        }

        function calcDegreeToPoint(latitude, longitude) {
          // Qibla geolocation
          const point = {
            lat: 21.422487,
            lng: 39.826206
          };

          const phiK = (point.lat * Math.PI) / 180.0;
          const lambdaK = (point.lng * Math.PI) / 180.0;
          const phi = (latitude * Math.PI) / 180.0;
          const lambda = (longitude * Math.PI) / 180.0;
          const psi =
            (180.0 / Math.PI) *
            Math.atan2(
              Math.sin(lambdaK - lambda),
              Math.cos(phi) * Math.tan(phiK) -
                Math.sin(phi) * Math.cos(lambdaK - lambda)
            );
          return Math.round(psi);
        }

        init();

      </script>

      



			<footer class="wrapper style1 align-center">
				<div class="inner">
					<p>
						<a href="/">home</a> - 
						<a href="/times">times</a> - 
						<a href="/qibla">qibla</a> - 
						<a href="/quran">quran</a>
						<br>
						<br>
						made with <span style="color: #e25555;"><i class="fas fa-heart"></i></span> by muslims for muslims
						<br>
						
						<a target="_blank" href="https://github.com/muslimist">github</a> - 
						<a>privacy</a> - 
						<a onclick="toggledarkmode()">dark mode</a>
					</p>
				</div>
			</footer>


		</div>


	</body>
</html>